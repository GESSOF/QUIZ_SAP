<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 033 - Resumen JOINs SAP HANA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .content {
            padding: 40px;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .question-card.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .question-number {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .option.correct {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .final-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            margin-top: 30px;
        }

        .final-score.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .study-tips {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .study-tips h4 {
            color: #e65100;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .study-tips ul {
            margin-left: 20px;
        }

        .study-tips li {
            margin-bottom: 8px;
            color: #bf360c;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                margin: 0;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .question-card {
                padding: 20px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-item {
                padding: 12px 20px;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
            
            .option {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .content {
                padding: 15px;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📋 Quiz 033 | SAP HANA</h1>
            <p>Resumen Completo de JOINs - Consolidación de Conocimientos</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="currentQuestion">1</span>
                    <span>Pregunta</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalQuestions">8</span>
                    <span>Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="score">0</span>
                    <span>Puntaje</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <div id="questionContainer"></div>
            
            <div class="final-score" id="finalScore">
                <div class="score-circle" id="finalScoreCircle">0%</div>
                <h2>¡Quiz Completado!</h2>
                <p id="scoreMessage"></p>
                <button class="btn btn-primary" onclick="restartQuiz()">Reiniciar Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¿Cuál es el propósito principal de esta clase de consolidación de JOINs?",
                options: [
                    "Introducir nuevos tipos de JOINs avanzados",
                    "Reforzar conceptos, detectar errores comunes y afianzar conocimientos de JOINs",
                    "Enseñar solo INNER JOIN en profundidad",
                    "Reemplazar todos los JOINs con subconsultas"
                ],
                correct: 1,
                explanation: "La clase de consolidación busca afianzar conceptos que pueden haberse pasado por alto, reforzar práctica con ejemplos complejos, detectar errores comunes y preparar una base sólida para temas más avanzados."
            },
            {
                question: "Con nuestros datos de ejemplo (Werner-MI, Mark-MI, Tom-TX, Bob-TX y estados MI-Michigan, AL-Alabama), ¿cuántos registros devuelve cada tipo de JOIN?",
                options: [
                    "INNER:4, LEFT:2, RIGHT:3, FULL:5",
                    "INNER:2, LEFT:4, RIGHT:3, FULL:5",
                    "INNER:2, LEFT:3, RIGHT:4, FULL:5",
                    "INNER:3, LEFT:4, RIGHT:2, FULL:6"
                ],
                correct: 1,
                explanation: "INNER JOIN: 2 registros (solo Werner y Mark con MI válido). LEFT OUTER: 4 registros (todos los clientes). RIGHT OUTER: 3 registros (todos los estados). FULL OUTER: 5 registros (todos los clientes + todos los estados)."
            },
            {
                question: "¿Cuál es el punto más importante y fundamental de los JOINs?",
                options: [
                    "Usar alias descriptivos en las consultas",
                    "Establecer correctamente los campos de unión (relación entre tablas)",
                    "Optimizar el rendimiento de las consultas",
                    "Seleccionar solo los campos necesarios"
                ],
                correct: 1,
                explanation: "Hacer bien los puntos de unión es el punto fundamental de los JOINs. Si establecemos mal la relación entre tablas (campos de unión), no obtendremos los resultados esperados, sin importar qué tipo de JOIN usemos."
            },
            {
                question: "¿Qué sucede cuando estableces una relación incorrecta como 'c.customer_name = s.state'?",
                options: [
                    "El sistema devuelve un error de sintaxis",
                    "La consulta se ejecuta exitosamente pero devuelve 0 registros",
                    "Solo devuelve los registros que coinciden exactamente",
                    "El sistema corrige automáticamente la relación"
                ],
                correct: 1,
                explanation: "Con relación incorrecta (customer_name = state), la consulta se ejecuta sin errores pero nunca encuentra coincidencias (Werner ≠ MI, Mark ≠ AL, etc.), resultando en 0 registros devueltos."
            },
            {
                question: "¿Por qué son importantes los alias en consultas con JOINs múltiples?",
                options: [
                    "Solo para hacer las consultas más largas",
                    "Para evitar ambigüedad, facilitar escritura y mejorar legibilidad",
                    "Son opcionales y no afectan el resultado",
                    "Solo funcionan con INNER JOIN"
                ],
                correct: 1,
                explanation: "Los alias evitan ambigüedad cuando hay campos con el mismo nombre, facilitan la escritura con nombres cortos, mejoran la legibilidad del código y son esenciales en consultas complejas con múltiples tablas."
            },
            {
                question: "En una consulta compleja con múltiples JOINs (pedidos + clientes + empleados + envío), ¿cuál es la metodología correcta de construcción?",
                options: [
                    "Escribir todo de una vez sin planificación",
                    "Empezar con la tabla base y añadir JOINs progresivamente paso a paso",
                    "Usar solo FULL OUTER JOIN para obtener todo",
                    "Hacer consultas separadas y unir manualmente"
                ],
                correct: 1,
                explanation: "La construcción incremental es clave: empezar con una tabla base, añadir JOINs progresivamente, verificar cada paso, usar alias descriptivos y construir complejidad gradualmente para evitar errores."
            },
            {
                question: "¿Cuál es la diferencia fundamental entre tener 'datos' y tener 'información' en el contexto de JOINs?",
                options: [
                    "No hay diferencia, son términos sinónimos",
                    "Datos son hechos aislados, información son datos relacionados que cuentan una historia completa",
                    "Información es más lenta de procesar que datos",
                    "Los datos son más importantes que la información"
                ],
                correct: 1,
                explanation: "Datos son hechos aislados sin contexto (números, fechas, nombres sueltos). Información son datos relacionados que cuentan una historia completa. Los JOINs transforman datos dispersos en información útil para tomar decisiones."
            },
            {
                question: "¿Qué logras al completar esta consolidación de JOINs?",
                options: [
                    "Solo conocimiento básico de un tipo de JOIN",
                    "Dominio completo de los 4 JOINs del SQL estándar y preparación para temas avanzados",
                    "Certificación automática en SAP HANA",
                    "Únicamente teoría sin aplicación práctica"
                ],
                correct: 1,
                explanation: "Al completar esta consolidación dominas los 4 tipos de JOINs del SQL estándar, puedes construir consultas complejas, depurar problemas, transformar datos en información y tienes bases sólidas para temas avanzados como subconsultas y optimización."
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function initQuiz() {
            displayQuestion();
            updateProgress();
        }

        function displayQuestion() {
            const container = document.getElementById('questionContainer');
            const question = questions[currentQuestionIndex];
            
            container.innerHTML = `
                <div class="question-card active">
                    <div class="question-number">Pregunta ${currentQuestionIndex + 1} de ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options" id="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})" data-index="${index}">
                                <strong>${String.fromCharCode(65 + index)})</strong> ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <h4>📋 Explicación:</h4>
                        <p>${question.explanation}</p>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            ← Anterior
                        </button>
                        <button class="btn btn-primary" onclick="submitAnswer()" id="submitBtn" disabled>
                            Confirmar Respuesta
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                            ${currentQuestionIndex === questions.length - 1 ? 'Ver Resultados' : 'Siguiente →'}
                        </button>
                    </div>
                </div>
            `;
            
            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex] !== undefined) {
                selectOption(userAnswers[currentQuestionIndex]);
                submitAnswer();
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[index].classList.add('selected');
            
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            const selectedOption = document.querySelector('.option.selected');
            if (!selectedOption) return;
            
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const question = questions[currentQuestionIndex];
            
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.onclick = null;
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            document.getElementById('explanation').classList.add('show');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                updateProgress();
            } else {
                showFinalScore();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update score
            score = userAnswers.filter((answer, index) => answer === questions[index].correct).length;
            document.getElementById('score').textContent = score;
        }

        function showFinalScore() {
            const finalScore = Math.round((score / questions.length) * 100);
            
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('finalScore').classList.add('show');
            document.getElementById('finalScoreCircle').textContent = finalScore + '%';
            
            let message = '';
            if (finalScore >= 80) {
                message = '🎉 ¡Excelente! Has consolidado completamente el conocimiento de JOINs y estás listo para temas avanzados.';
            } else if (finalScore >= 60) {
                message = '👍 Buen trabajo. Repasa los conceptos fundamentales para perfeccionar tu dominio de JOINs.';
            } else {
                message = '⚠️ IMPORTANTE: Debes reforzar los conceptos básicos de JOINs antes de continuar.';
            }
            
            document.getElementById('scoreMessage').innerHTML = `
                <p>${message}</p>
                <div class="study-tips">
                    <h4>📋 Puntos consolidados en JOINs:</h4>
                    <ul>
                        <li><strong>4 tipos principales:</strong> INNER, LEFT OUTER, RIGHT OUTER, FULL OUTER</li>
                        <li><strong>Campos de unión:</strong> Base fundamental de todo JOIN exitoso</li>
                        <li><strong>Depuración sistemática:</strong> Revisar relaciones ante problemas</li>
                        <li><strong>Alias esenciales:</strong> Evitan ambigüedad y mejoran legibilidad</li>
                        <li><strong>Construcción incremental:</strong> Paso a paso en consultas complejas</li>
                        <li><strong>Datos → Información:</strong> Transformación del valor real</li>
                        <li><strong>Preparación avanzada:</strong> Base sólida para subconsultas</li>
                        <li><strong>Aplicación práctica:</strong> De conceptos a soluciones reales</li>
                    </ul>
                </div>
            `;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('finalScore').classList.remove('show');
            
            initQuiz();
        }

        // Initialize quiz when page loads
        window.onload = initQuiz;
    </script>
</body>
</html>