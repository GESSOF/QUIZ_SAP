<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 044 - Ejercicio Pr√°ctico SQL</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .content {
            padding: 40px;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .question-card.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .question-number {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .option.correct {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .final-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            margin-top: 30px;
        }

        .final-score.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .study-tips {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .study-tips h4 {
            color: #e65100;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .study-tips ul {
            margin-left: 20px;
        }

        .study-tips li {
            margin-bottom: 8px;
            color: #bf360c;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                margin: 0;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .question-card {
                padding: 20px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-item {
                padding: 12px 20px;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
            
            .option {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .content {
                padding: 15px;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Quiz 044 | SQL Pr√°ctico</h1>
            <p>Ejercicio Pr√°ctico SQL - Consultas Avanzadas con DML</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="currentQuestion">1</span>
                    <span>Pregunta</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalQuestions">8</span>
                    <span>Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="score">0</span>
                    <span>Puntaje</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <div id="questionContainer"></div>
            
            <div class="final-score" id="finalScore">
                <div class="score-circle" id="finalScoreCircle">0%</div>
                <h2>¬°Quiz Completado!</h2>
                <p id="scoreMessage"></p>
                <button class="btn btn-primary" onclick="restartQuiz()">Reiniciar Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¬øPor qu√© se considera que SQL distingue entre may√∫sculas y min√∫sculas en las b√∫squedas con LIKE?",
                options: [
                    "Es una limitaci√≥n del motor de base de datos",
                    "SQL busca coincidencias exactas de caracteres, 'W' es diferente de 'w'",
                    "Solo ocurre en consultas complejas",
                    "Es un error de configuraci√≥n del sistema"
                ],
                correct: 1,
                explanation: "SQL distingue entre may√∫sculas y min√∫sculas porque busca coincidencias exactas de caracteres. 'W' y 'w' son caracteres diferentes. Por eso se recomienda usar funciones como UPPER() para b√∫squedas case-insensitive."
            },
            {
                question: "¬øCu√°l es la ventaja principal de usar UPPER() en la cl√°usula WHERE?",
                options: [
                    "Mejora el rendimiento de la consulta",
                    "Permite b√∫squedas sin distinci√≥n de may√∫sculas y min√∫sculas",
                    "Formatea la salida de datos en may√∫sculas",
                    "Es obligatorio para usar LIKE"
                ],
                correct: 1,
                explanation: "UPPER() en WHERE convierte el texto a may√∫sculas para la comparaci√≥n, permitiendo b√∫squedas case-insensitive. La funci√≥n aplicada en WHERE no afecta la salida de datos en SELECT, solo la condici√≥n de b√∫squeda."
            },
            {
                question: "¬øCu√°l es la diferencia principal entre INNER JOIN y LEFT JOIN?",
                options: [
                    "INNER JOIN es m√°s r√°pido que LEFT JOIN",
                    "INNER JOIN solo muestra coincidencias, LEFT JOIN incluye todos los registros de la tabla izquierda",
                    "LEFT JOIN no puede usar alias de tablas",
                    "INNER JOIN requiere m√°s memoria"
                ],
                correct: 1,
                explanation: "INNER JOIN solo devuelve registros que tienen coincidencias en ambas tablas. LEFT JOIN devuelve todos los registros de la tabla izquierda, incluso si no tienen coincidencias en la tabla derecha (mostrando NULL en esos casos)."
            },
            {
                question: "¬øPor qu√© es recomendable usar LEFT JOIN para reportes completos de clientes?",
                options: [
                    "Es m√°s eficiente en t√©rminos de memoria",
                    "Permite incluir clientes sin pedidos, informaci√≥n valiosa para detectar oportunidades",
                    "Es la √∫nica forma de usar GROUP BY",
                    "Los alias funcionan mejor con LEFT JOIN"
                ],
                correct: 1,
                explanation: "LEFT JOIN incluye todos los clientes, incluso aquellos que no han realizado pedidos. Esta informaci√≥n es valiosa para identificar oportunidades comerciales y tener una vista completa del negocio, no solo de clientes activos."
            },
            {
                question: "¬øQu√© funci√≥n cumple CONCAT() en las consultas SQL?",
                options: [
                    "Cuenta el n√∫mero de caracteres en un campo",
                    "Une/concatena cadenas de texto en una sola",
                    "Convierte n√∫meros a texto",
                    "Separa texto en m√∫ltiples campos"
                ],
                correct: 1,
                explanation: "CONCAT() une o concatena m√∫ltiples cadenas de texto en una sola. Es √∫til para combinar campos como nombre y apellido, o crear formatos espec√≠ficos de presentaci√≥n de datos."
            },
            {
                question: "En una consulta con GROUP BY, ¬øqu√© campos deben incluirse obligatoriamente en la cl√°usula GROUP BY?",
                options: [
                    "Solo los campos num√©ricos",
                    "Todos los campos que aparecen en SELECT y no son funciones de agregaci√≥n",
                    "√önicamente el primer campo del SELECT",
                    "Solo los campos con alias"
                ],
                correct: 1,
                explanation: "En GROUP BY se deben incluir todos los campos que aparecen en SELECT y que NO son funciones de agregaci√≥n (COUNT, SUM, etc.). Esto es una regla estricta de SQL para consultas agrupadas."
            },
            {
                question: "¬øCu√°l es la mejor pr√°ctica para mejorar la legibilidad en consultas complejas con m√∫ltiples tablas?",
                options: [
                    "Usar nombres de tabla completos siempre",
                    "Asignar alias cortos a las tablas y prefijar todos los campos",
                    "Escribir todo en una sola l√≠nea",
                    "Evitar el uso de saltos de l√≠nea"
                ],
                correct: 1,
                explanation: "Usar alias cortos (AS c, AS p, AS e) y prefijar todos los campos (c.nombre_compania, p.fecha_pedido) mejora significativamente la legibilidad y mantenimiento de consultas complejas con m√∫ltiples tablas."
            },
            {
                question: "¬øQu√© informaci√≥n valiosa proporciona una consulta que combina clientes, pedidos y empleados?",
                options: [
                    "Solo el n√∫mero total de pedidos",
                    "An√°lisis completo: qu√© cliente compra, cu√°nto gasta y qu√© empleado lo atiende",
                    "√önicamente datos de contacto",
                    "Solo fechas de pedidos"
                ],
                correct: 1,
                explanation: "Combinar estas tres tablas proporciona un an√°lisis integral del negocio: permite identificar clientes valiosos, empleados productivos, montos de ventas, y patrones de comportamiento comercial para toma de decisiones estrat√©gicas."
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function initQuiz() {
            displayQuestion();
            updateProgress();
        }

        function displayQuestion() {
            const container = document.getElementById('questionContainer');
            const question = questions[currentQuestionIndex];
            
            container.innerHTML = `
                <div class="question-card active">
                    <div class="question-number">Pregunta ${currentQuestionIndex + 1} de ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options" id="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})" data-index="${index}">
                                <strong>${String.fromCharCode(65 + index)})</strong> ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <h4>üí° Explicaci√≥n:</h4>
                        <p>${question.explanation}</p>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            ‚Üê Anterior
                        </button>
                        <button class="btn btn-primary" onclick="submitAnswer()" id="submitBtn" disabled>
                            Confirmar Respuesta
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                            ${currentQuestionIndex === questions.length - 1 ? 'Ver Resultados' : 'Siguiente ‚Üí'}
                        </button>
                    </div>
                </div>
            `;
            
            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex] !== undefined) {
                selectOption(userAnswers[currentQuestionIndex]);
                submitAnswer();
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[index].classList.add('selected');
            
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            const selectedOption = document.querySelector('.option.selected');
            if (!selectedOption) return;
            
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const question = questions[currentQuestionIndex];
            
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.onclick = null;
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            document.getElementById('explanation').classList.add('show');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                updateProgress();
            } else {
                showFinalScore();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update score
            score = userAnswers.filter((answer, index) => answer === questions[index].correct).length;
            document.getElementById('score').textContent = score;
        }

        function showFinalScore() {
            const finalScore = Math.round((score / questions.length) * 100);
            
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('finalScore').classList.add('show');
            document.getElementById('finalScoreCircle').textContent = finalScore + '%';
            
            let message = '';
            if (finalScore >= 80) {
                message = 'üéâ ¬°Excelente! Dominas las consultas SQL avanzadas y las mejores pr√°cticas.';
            } else if (finalScore >= 60) {
                message = 'üëç Buen trabajo. Repasa los conceptos de JOINS y funciones de agregaci√≥n.';
            } else {
                message = 'üìö Necesitas repasar los conceptos fundamentales de consultas complejas en SQL.';
            }
            
            document.getElementById('scoreMessage').innerHTML = `
                <p>${message}</p>
                <div class="study-tips">
                    <h4>üîë Conceptos clave para dominar SQL avanzado:</h4>
                    <ul>
                        <li><strong>Case-sensitivity:</strong> SQL distingue may√∫sculas/min√∫sculas, usar UPPER() para b√∫squedas</li>
                        <li><strong>INNER vs LEFT JOIN:</strong> INNER solo coincidencias, LEFT incluye todos de la izquierda</li>
                        <li><strong>GROUP BY obligatorio:</strong> Incluir todos los campos no agregados</li>
                        <li><strong>Alias y prefijos:</strong> Mejoran legibilidad en consultas complejas</li>
                        <li><strong>Funciones de cadena:</strong> UPPER(), LOWER(), CONCAT() para manipular texto</li>
                        <li><strong>LEFT JOIN para reportes:</strong> Incluye registros sin coincidencias</li>
                        <li><strong>Consultas multi-tabla:</strong> An√°lisis integral del negocio</li>
                        <li><strong>Formato y estructura:</strong> Consultas legibles y mantenibles</li>
                    </ul>
                </div>
            `;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('finalScore').classList.remove('show');
            
            initQuiz();
        }

        // Initialize quiz when page loads
        window.onload = initQuiz;
    </script>
</body>
</html>