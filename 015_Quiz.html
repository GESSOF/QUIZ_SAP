<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 015 - Modelo Relacional SAP HANA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .content {
            padding: 40px;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .question-card.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .question-number {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .option.correct {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .final-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            margin-top: 30px;
        }

        .final-score.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .study-tips {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .study-tips h4 {
            color: #e65100;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .study-tips ul {
            margin-left: 20px;
        }

        .study-tips li {
            margin-bottom: 8px;
            color: #bf360c;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                margin: 0;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .question-card {
                padding: 20px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-item {
                padding: 12px 20px;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
            
            .option {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .content {
                padding: 15px;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 Quiz 015 | SAP HANA</h1>
            <p>Modelo Relacional - Fundamentos y Conversión</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="currentQuestion">1</span>
                    <span>Pregunta</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalQuestions">8</span>
                    <span>Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="score">0</span>
                    <span>Puntaje</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <div id="questionContainer"></div>
            
            <div class="final-score" id="finalScore">
                <div class="score-circle" id="finalScoreCircle">0%</div>
                <h2>¡Quiz Completado!</h2>
                <p id="scoreMessage"></p>
                <button class="btn btn-primary" onclick="restartQuiz()">Reiniciar Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¿Cuál es el objetivo principal del modelo relacional en el proceso de modelado de bases de datos?",
                options: [
                    "Crear el diseño físico final de la base de datos",
                    "Conformar el modelo lógico a partir del cual se realizará el modelado físico",
                    "Reemplazar completamente el diagrama entidad-relación",
                    "Generar automáticamente las consultas SQL"
                ],
                correct: 1,
                explanation: "El modelo relacional conforma el modelo lógico o esquema de la base de datos, siendo un paso necesario entre el nivel conceptual (ER) y el nivel físico. Permite la implementación concreta al incluir tipos de datos específicos y estructura en tablas."
            },
            {
                question: "¿Qué diferencia fundamental existe entre una clave única y una clave primaria?",
                options: [
                    "La clave única permite valores nulos, la clave primaria no",
                    "No hay diferencias, son sinónimos",
                    "La clave única es más rápida en consultas",
                    "La clave primaria se usa solo en tablas grandes"
                ],
                correct: 0,
                explanation: "La clave única evita valores duplicados pero puede contener valores nulos, mientras que la clave primaria no permite valores duplicados NI nulos. Además, solo puede haber una clave primaria por tabla, pero varias claves únicas."
            },
            {
                question: "En la Primera Forma Normal (1FN), ¿cuál es la regla fundamental que debe cumplirse?",
                options: [
                    "Eliminar todas las dependencias funcionales",
                    "Crear claves foráneas en todas las tablas",
                    "No debe haber dependencias entre atributos no clave",
                    "Todos los dominios de los atributos deben contener valores atómicos"
                ],
                correct: 3,
                explanation: "La 1FN establece que todos los dominios deben contener valores atómicos (indivisibles). Esto significa no tener campos multivalorados y que los datos sean lo más granulares posible, con todos los registros teniendo el mismo número de columnas."
            },
            {
                question: "¿Cuándo se aplica específicamente la Segunda Forma Normal (2FN)?",
                options: [
                    "Solo cuando la clave primaria es compuesta (múltiples campos)",
                    "En todas las tablas sin excepción",
                    "Únicamente en tablas con más de 1000 registros",
                    "Solo en tablas que tengan claves foráneas"
                ],
                correct: 0,
                explanation: "La 2FN solo se aplica cuando la clave primaria es compuesta. Requiere que cada atributo no clave tenga dependencia funcional completa de TODA la clave primaria, no solo de una parte de ella."
            },
            {
                question: "¿Cuál es la acción referencial más restrictiva en integridad referencial?",
                options: [
                    "CASCADE - borra en cascada",
                    "SET NULL - asigna valores nulos", 
                    "SET DEFAULT - asigna valores por defecto",
                    "RESTRICT - no permite borrar/modificar si existen referencias"
                ],
                correct: 3,
                explanation: "RESTRICT es la acción más restrictiva porque no permite borrar o modificar registros en la tabla principal si existen referencias en tablas dependientes, protegiendo completamente la integridad de los datos relacionados."
            },
            {
                question: "Al convertir una relación N:M del modelo ER al modelo relacional, ¿qué se debe hacer?",
                options: [
                    "Ignorar la relación y conectar directamente las entidades",
                    "Convertir una entidad en clave foránea de la otra",
                    "Crear una nueva tabla cuya clave primaria sea la unión de las claves de ambas entidades",
                    "Eliminar una de las entidades para simplificar"
                ],
                correct: 2,
                explanation: "Las relaciones N:M siempre requieren crear una nueva tabla intermedia. Su clave primaria está compuesta por las claves primarias de ambas entidades relacionadas, actuando como claves foráneas hacia las tablas originales."
            },
            {
                question: "¿Cuál es la principal desventaja del modelo relacional respecto a la representación de datos complejos?",
                options: [
                    "Es muy lento para consultas simples",
                    "Solo puede gestionar datos atómicos, sin herencia ni jerarquías",
                    "No permite múltiples usuarios simultáneos",
                    "Requiere demasiado espacio de almacenamiento"
                ],
                correct: 1,
                explanation: "El modelo relacional solo maneja datos atómicos y carece de capacidades como herencia, jerarquías o representación de reglas de negocio complejas. Esto lo limita frente a estructuras de datos no atómicas o modelos orientados a objetos."
            },
            {
                question: "En la conversión de ER a modelo relacional, ¿cómo se maneja una relación 1:1?",
                options: [
                    "Se crea siempre una tabla intermedia",
                    "Se elimina una de las entidades",
                    "La clave se puede trasladar en cualquier dirección, recomendándose hacia la tabla dependiente",
                    "Se convierten ambas entidades en una sola tabla"
                ],
                correct: 2,
                explanation: "En relaciones 1:1, la clave primaria se puede trasladar en cualquier dirección como clave foránea. Sin embargo, se recomienda trasladarla hacia la tabla que represente la entidad dependiente o con menor cardinalidad para optimizar el diseño."
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function initQuiz() {
            displayQuestion();
            updateProgress();
        }

        function displayQuestion() {
            const container = document.getElementById('questionContainer');
            const question = questions[currentQuestionIndex];
            
            container.innerHTML = `
                <div class="question-card active">
                    <div class="question-number">Pregunta ${currentQuestionIndex + 1} de ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options" id="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})" data-index="${index}">
                                <strong>${String.fromCharCode(65 + index)})</strong> ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <h4>💡 Explicación:</h4>
                        <p>${question.explanation}</p>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            ← Anterior
                        </button>
                        <button class="btn btn-primary" onclick="submitAnswer()" id="submitBtn" disabled>
                            Confirmar Respuesta
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                            ${currentQuestionIndex === questions.length - 1 ? 'Ver Resultados' : 'Siguiente →'}
                        </button>
                    </div>
                </div>
            `;
            
            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex] !== undefined) {
                selectOption(userAnswers[currentQuestionIndex]);
                submitAnswer();
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[index].classList.add('selected');
            
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            const selectedOption = document.querySelector('.option.selected');
            if (!selectedOption) return;
            
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const question = questions[currentQuestionIndex];
            
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.onclick = null;
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            document.getElementById('explanation').classList.add('show');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                updateProgress();
            } else {
                showFinalScore();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update score
            score = userAnswers.filter((answer, index) => answer === questions[index].correct).length;
            document.getElementById('score').textContent = score;
        }

        function showFinalScore() {
            const finalScore = Math.round((score / questions.length) * 100);
            
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('finalScore').classList.add('show');
            document.getElementById('finalScoreCircle').textContent = finalScore + '%';
            
            let message = '';
            if (finalScore >= 80) {
                message = '🎉 ¡Excelente! Dominas los fundamentos del modelo relacional.';
            } else if (finalScore >= 60) {
                message = '👍 Buen trabajo. Repasa la normalización y conversión ER para perfeccionar.';
            } else {
                message = '📚 Necesitas reforzar los conceptos fundamentales del modelo relacional.';
            }
            
            document.getElementById('scoreMessage').innerHTML = `
                <p>${message}</p>
                <div class="study-tips">
                    <h4>📊 Puntos clave del Modelo Relacional:</h4>
                    <ul>
                        <li><strong>Niveles de abstracción:</strong> Conceptual (ER) → Lógico (Relacional) → Físico</li>
                        <li><strong>Claves:</strong> Única (permite nulos) vs Primaria (no nulos, una por tabla)</li>
                        <li><strong>Normalización:</strong> 1FN (valores atómicos), 2FN (clave compuesta), 3FN (no dependencias transitivas)</li>
                        <li><strong>Integridad referencial:</strong> RESTRICT más restrictivo que CASCADE</li>
                        <li><strong>Conversión 1:N:</strong> Clave del lado "1" va al lado "N"</li>
                        <li><strong>Conversión N:M:</strong> Siempre requiere tabla intermedia</li>
                        <li><strong>Conversión 1:1:</strong> Clave hacia entidad dependiente</li>
                        <li><strong>Limitaciones:</strong> Solo datos atómicos, sin herencia ni jerarquías</li>
                    </ul>
                </div>
            `;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('finalScore').classList.remove('show');
            
            initQuiz();
        }

        // Initialize quiz when page loads
        window.onload = initQuiz;
    </script>
</body>
</html>