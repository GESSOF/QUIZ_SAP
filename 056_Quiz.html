<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz 056 - CREATE SEQUENCE (SAP HANA)</title>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: auto;
      background: rgba(255,255,255,.96);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,.15);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #5b21b6 0%, #4c1d95 100%);
      color: #fff;
      padding: 30px;
      text-align: center;
    }

    .header h1 { font-size: 2.4em; margin-bottom: 10px; }
    .header p { opacity: .9; }

    .stats {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 20px;
    }

    .stat-item {
      background: rgba(255,255,255,.15);
      padding: 15px 25px;
      border-radius: 15px;
      text-align: center;
    }

    .stat-number {
      font-size: 2em;
      font-weight: bold;
      display: block;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,.25);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 18px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg,#4CAF50,#45a049);
      width: 0%;
      transition: width .6s ease;
    }

    .content { padding: 40px; }

    .question-card {
      background: #fff;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,.1);
      border-left: 5px solid #7c3aed;
      display: none;
    }

    .question-card.active { display:block; }

    .question-number {
      color:#5b21b6;
      font-weight:bold;
      margin-bottom:10px;
    }

    .question-text {
      font-size:1.25em;
      font-weight:600;
      margin-bottom:25px;
      color:#333;
    }

    .options { display:grid; gap:15px; }

    .option {
      background: linear-gradient(135deg,#f5f3ff,#ddd6fe);
      padding:18px;
      border-radius:12px;
      cursor:pointer;
      transition:.25s;
      border:2px solid transparent;
    }

    .option:hover {
      transform: translateY(-2px);
      box-shadow:0 8px 25px rgba(0,0,0,.15);
    }

    .option.selected {
      background: linear-gradient(135deg,#7c3aed,#5b21b6);
      color:#fff;
      border-color:#7c3aed;
    }

    .option.correct {
      background: linear-gradient(135deg,#4CAF50,#45a049);
      color:#fff;
    }

    .option.incorrect {
      background: linear-gradient(135deg,#f44336,#da190b);
      color:#fff;
    }

    .buttons {
      display:flex;
      justify-content:space-between;
      margin-top:30px;
      gap:15px;
    }

    .btn {
      padding:14px 28px;
      border:none;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:1px;
    }

    .btn-primary {
      background: linear-gradient(135deg,#7c3aed,#5b21b6);
      color:#fff;
    }

    .btn-secondary {
      background: linear-gradient(135deg,#f5f3ff,#ddd6fe);
      color:#4c1d95;
    }

    .btn:disabled { opacity:.5; cursor:not-allowed; }

    .explanation {
      display:none;
      margin-top:20px;
      background:#ede9fe;
      border-left:4px solid #7c3aed;
      padding:18px;
      border-radius:10px;
    }

    .explanation.show { display:block; }

    .final-score {
      display:none;
      background: linear-gradient(135deg,#7c3aed,#5b21b6);
      color:#fff;
      padding:40px;
      border-radius:20px;
      text-align:center;
    }

    .final-score.show { display:block; }

    .score-circle {
      width:150px;
      height:150px;
      border-radius:50%;
      background: rgba(255,255,255,.18);
      margin:0 auto 20px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:2.5em;
      font-weight:bold;
    }
  </style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>üéØ Quiz 056 | SAP HANA</h1>
    <p>CREATE SEQUENCE ‚Äî Generaci√≥n de identificadores</p>

    <div class="stats">
      <div class="stat-item"><span class="stat-number" id="currentQuestion">1</span>Pregunta</div>
      <div class="stat-item"><span class="stat-number" id="totalQuestions">8</span>Total</div>
      <div class="stat-item"><span class="stat-number" id="score">0</span>Puntaje</div>
    </div>

    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
  </div>

  <div class="content">
    <div id="questionContainer"></div>

    <div class="final-score" id="finalScore">
      <div class="score-circle" id="finalScoreCircle">0%</div>
      <h2>¬°Quiz Completado!</h2>
      <p id="scoreMessage"></p>
      <button class="btn btn-primary" onclick="restartQuiz()">Reiniciar Quiz</button>
    </div>
  </div>
</div>

<script>
const questionsBase = [
 {
  question:"¬øQu√© es una secuencia (SEQUENCE) en SAP HANA?",
  options:[
    "Una tabla temporal",
    "Un objeto que genera valores num√©ricos secuenciales",
    "Un tipo de √≠ndice",
    "Una vista especial"
  ],
  correct:1,
  explanation:"Una secuencia es un objeto de base de datos que genera n√∫meros secuenciales y √∫nicos."
 },
 {
  question:"¬øPara qu√© se usan principalmente las secuencias?",
  options:[
    "Para ordenar tablas",
    "Para generar claves primarias",
    "Para cifrar datos",
    "Para crear √≠ndices"
  ],
  correct:1,
  explanation:"Se usan principalmente para generar identificadores √∫nicos, como claves primarias."
 },
 {
  question:"¬øCu√°l es la forma correcta de obtener el siguiente valor de una secuencia?",
  options:[
    "secuencia.VALUE",
    "secuencia.GET()",
    "secuencia.NEXTVAL",
    "NEXT(secuencia)"
  ],
  correct:2,
  explanation:"NEXTVAL devuelve el siguiente valor y avanza la secuencia."
 },
 {
  question:"¬øQu√© hace la propiedad CURRVAL?",
  options:[
    "Avanza la secuencia",
    "Devuelve el valor actual sin incrementarlo",
    "Reinicia la secuencia",
    "Elimina la secuencia"
  ],
  correct:1,
  explanation:"CURRVAL devuelve el valor actual sin modificar el contador."
 },
 {
  question:"¬øQu√© par√°metro define el valor inicial de una secuencia?",
  options:[
    "MINVALUE",
    "START WITH",
    "INCREMENT BY",
    "BEGIN"
  ],
  correct:1,
  explanation:"START WITH define desde qu√© n√∫mero comienza la secuencia."
 },
 {
  question:"¬øQu√© ocurre si una secuencia llega a su valor m√°ximo y NO tiene CYCLE?",
  options:[
    "Se reinicia autom√°ticamente",
    "Genera valores duplicados",
    "Queda exhausta y falla",
    "Se elimina"
  ],
  correct:2,
  explanation:"Sin CYCLE, la secuencia se agota al alcanzar su l√≠mite."
 },
 {
  question:"¬øPor qu√© NO se recomienda usar CYCLE para claves primarias?",
  options:[
    "Porque es m√°s lento",
    "Porque no funciona en HANA",
    "Porque puede generar valores duplicados",
    "Porque elimina registros"
  ],
  correct:2,
  explanation:"CYCLE puede reutilizar valores y provocar duplicados en claves primarias."
 },
 {
  question:"¬øQu√© sucede con una secuencia tras reiniciar el sistema?",
  options:[
    "Se reinicia autom√°ticamente",
    "Se elimina",
    "Contin√∫a desde el √∫ltimo valor guardado",
    "Pierde su configuraci√≥n"
  ],
  correct:2,
  explanation:"Las secuencias son persistentes y contin√∫an desde el √∫ltimo valor usado."
 }
];

let questions=[], current=0, answers=[], score=0;

function shuffle(arr){ return [...arr].sort(()=>Math.random()-.5); }

function initQuiz(){
 questions = questionsBase.map(q=>{
  const correctText = q.options[q.correct];
  const opts = shuffle(q.options);
  return {...q, options:opts, correct:opts.indexOf(correctText)};
 });
 current=0; answers=[]; score=0;
 document.getElementById("totalQuestions").textContent=questions.length;
 showQuestion(); update();
}

function showQuestion(){
 const q=questions[current];
 document.getElementById("questionContainer").innerHTML=`
 <div class="question-card active">
  <div class="question-number">Pregunta ${current+1} de ${questions.length}</div>
  <div class="question-text">${q.question}</div>
  <div class="options">
   ${q.options.map((o,i)=>`<div class="option" onclick="select(${i})">${String.fromCharCode(65+i)}) ${o}</div>`).join("")}
  </div>
  <div class="explanation" id="exp"><strong>üí° Explicaci√≥n:</strong><br>${q.explanation}</div>
  <div class="buttons">
   <button class="btn btn-secondary" onclick="prev()" ${current===0?"disabled":""}>‚Üê Anterior</button>
   <button class="btn btn-primary" id="confirm" disabled onclick="confirm()">Confirmar</button>
   <button class="btn btn-primary" id="next" style="display:none" onclick="next()">${current===questions.length-1?"Resultados":"Siguiente ‚Üí"}</button>
  </div>
 </div>`;
}

function select(i){
 document.querySelectorAll(".option").forEach(o=>o.classList.remove("selected"));
 document.querySelectorAll(".option")[i].classList.add("selected");
 document.getElementById("confirm").disabled=false;
}

function confirm(){
 const sel=document.querySelector(".option.selected");
 if(!sel)return;
 const idx=[...sel.parentNode.children].indexOf(sel);
 answers[current]=idx;
 document.querySelectorAll(".option").forEach((o,i)=>{
  if(i===questions[current].correct)o.classList.add("correct");
  else if(i===idx)o.classList.add("incorrect");
 });
 document.getElementById("exp").classList.add("show");
 document.getElementById("confirm").style.display="none";
 document.getElementById("next").style.display="inline-block";
 update();
}

function next(){
 if(current<questions.length-1){current++;showQuestion();update();}
 else finish();
}

function prev(){current--;showQuestion();update();}

function update(){
 score=answers.filter((a,i)=>a===questions[i]?.correct).length;
 document.getElementById("score").textContent=score;
 document.getElementById("currentQuestion").textContent=current+1;
 document.getElementById("progressFill").style.width=((current+1)/questions.length*100)+"%";
}

function finish(){
 document.getElementById("questionContainer").style.display="none";
 document.getElementById("finalScore").classList.add("show");
 const pct=Math.round(score/questions.length*100);
 document.getElementById("finalScoreCircle").textContent=pct+"%";
 document.getElementById("scoreMessage").textContent=
  pct>=80?"üéâ Excelente dominio de CREATE SEQUENCE":
  pct>=60?"üëç Buen trabajo, repasa NEXTVAL y l√≠mites":
  "‚ö†Ô∏è Revisa par√°metros, CYCLE y uso correcto";
}

function restartQuiz(){
 document.getElementById("finalScore").classList.remove("show");
 document.getElementById("questionContainer").style.display="block";
 initQuiz();
}

window.onload=initQuiz;
</script>
</body>
</html>
