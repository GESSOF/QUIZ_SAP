<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 025 - Comando SELECT Fundamentos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .content {
            padding: 40px;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .question-card.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .question-number {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .option.correct {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .final-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            margin-top: 30px;
        }

        .final-score.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .study-tips {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .study-tips h4 {
            color: #e65100;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .study-tips ul {
            margin-left: 20px;
        }

        .study-tips li {
            margin-bottom: 8px;
            color: #bf360c;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                margin: 0;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .question-card {
                padding: 20px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-item {
                padding: 12px 20px;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
            
            .option {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .content {
                padding: 15px;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Quiz 025 | SAP HANA</h1>
            <p>Comando SELECT - Fundamentos y Sintaxis</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="currentQuestion">1</span>
                    <span>Pregunta</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalQuestions">8</span>
                    <span>Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="score">0</span>
                    <span>Puntaje</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <div id="questionContainer"></div>
            
            <div class="final-score" id="finalScore">
                <div class="score-circle" id="finalScoreCircle">0%</div>
                <h2>¬°Quiz Completado!</h2>
                <p id="scoreMessage"></p>
                <button class="btn btn-primary" onclick="restartQuiz()">Reiniciar Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¬øCu√°les son las tres preguntas fundamentales de la metodolog√≠a para construir consultas SELECT?",
                options: [
                    "¬øC√≥mo conectar? ¬øQu√© sintaxis? ¬øC√≥mo optimizar?",
                    "¬øQu√© datos necesito? ¬øD√≥nde est√°n? ¬øQu√© requisitos deben cumplir?",
                    "¬øCu√°ntos registros? ¬øQu√© columnas? ¬øC√≥mo ordenar?",
                    "¬øQu√© tablas unir? ¬øQu√© filtros aplicar? ¬øC√≥mo agrupar?"
                ],
                correct: 1,
                explanation: "La metodolog√≠a fundamental consiste en responder: 1) ¬øQu√© datos necesito? (identificar informaci√≥n requerida), 2) ¬øD√≥nde est√°n? (localizar las tablas), y 3) ¬øQu√© requisitos deben cumplir? (definir las condiciones). Esta metodolog√≠a es especialmente importante para principiantes."
            },
            {
                question: "¬øCu√°l es el orden correcto de procesamiento l√≥gico de las cl√°usulas SELECT?",
                options: [
                    "SELECT ‚Üí FROM ‚Üí WHERE ‚Üí GROUP BY ‚Üí HAVING ‚Üí ORDER BY",
                    "FROM ‚Üí WHERE ‚Üí GROUP BY ‚Üí HAVING ‚Üí SELECT ‚Üí ORDER BY",
                    "FROM ‚Üí SELECT ‚Üí WHERE ‚Üí GROUP BY ‚Üí ORDER BY ‚Üí HAVING",
                    "WHERE ‚Üí FROM ‚Üí SELECT ‚Üí GROUP BY ‚Üí HAVING ‚Üí ORDER BY"
                ],
                correct: 1,
                explanation: "SQL procesa en este orden l√≥gico: FROM (identifica fuentes), WHERE (filtra registros individuales), GROUP BY (agrupa datos), HAVING (filtra grupos), SELECT (selecciona columnas), ORDER BY (ordena resultado final). Este orden es fundamental para entender c√≥mo funciona SQL internamente."
            },
            {
                question: "¬øCu√°l es la diferencia entre WHERE y HAVING?",
                options: [
                    "WHERE es para n√∫meros y HAVING para texto",
                    "WHERE filtra registros individuales antes de agrupar, HAVING filtra grupos despu√©s de agrupar",
                    "WHERE es obligatorio y HAVING es opcional",
                    "WHERE es m√°s r√°pido que HAVING"
                ],
                correct: 1,
                explanation: "WHERE filtra registros individuales ANTES de la agrupaci√≥n, mientras que HAVING filtra grupos DESPU√âS de la agrupaci√≥n y agregaci√≥n. WHERE no puede usar funciones de agregaci√≥n, pero HAVING s√≠ puede."
            },
            {
                question: "¬øCu√°les son las cinco funciones principales de agregaci√≥n en SQL?",
                options: [
                    "SELECT, INSERT, UPDATE, DELETE, CREATE",
                    "COUNT, SUM, AVG, MAX, MIN",
                    "TOP, DISTINCT, ALL, ORDER, GROUP",
                    "FROM, WHERE, HAVING, ORDER, BY"
                ],
                correct: 1,
                explanation: "Las cinco funciones principales de agregaci√≥n son: COUNT() (conteo), SUM() (suma), AVG() (promedio), MAX() (m√°ximo) y MIN() (m√≠nimo). Estas funciones realizan operaciones matem√°ticas sobre conjuntos de datos para obtener res√∫menes estad√≠sticos."
            },
            {
                question: "¬øCu√°l es la regla fundamental de GROUP BY?",
                options: [
                    "GROUP BY debe usarse siempre con ORDER BY",
                    "GROUP BY solo puede usar funciones de agregaci√≥n",
                    "Todos los campos del SELECT que NO sean funciones de agregaci√≥n deben aparecer en GROUP BY",
                    "GROUP BY debe ir antes de WHERE"
                ],
                correct: 2,
                explanation: "La regla fundamental es que todos los campos del SELECT que NO sean funciones de agregaci√≥n deben aparecer en GROUP BY. Si tienes SELECT id_cliente, nombre, COUNT(*), entonces GROUP BY debe incluir id_cliente, nombre."
            },
            {
                question: "¬øCu√°l es la diferencia entre ALL y DISTINCT?",
                options: [
                    "ALL muestra solo n√∫meros y DISTINCT solo texto",
                    "ALL es la opci√≥n por defecto que muestra todos los registros, DISTINCT elimina duplicados",
                    "ALL ordena autom√°ticamente y DISTINCT no",
                    "ALL es m√°s r√°pido que DISTINCT"
                ],
                correct: 1,
                explanation: "ALL es la opci√≥n por defecto que muestra todos los registros incluyendo duplicados, mientras que DISTINCT elimina registros duplicados del resultado. Se demostr√≥ con el ejemplo de id_cliente en pedidos: ALL mostr√≥ 772 registros y DISTINCT mostr√≥ 89 registros √∫nicos."
            },
            {
                question: "¬øQu√© hace la cl√°usula TOP y c√≥mo se diferencia del filtrado?",
                options: [
                    "TOP ordena los datos de mayor a menor autom√°ticamente",
                    "TOP limita el n√∫mero de registros devueltos tomando los primeros N que encuentra, no calcula cu√°les son los 'mejores'",
                    "TOP filtra por condiciones espec√≠ficas de los datos",
                    "TOP es lo mismo que usar LIMIT en otros motores"
                ],
                correct: 1,
                explanation: "TOP es limitaci√≥n, no filtro. Simplemente toma los primeros N registros que encuentra, no calcula cu√°les son los 'mejores'. Para filtros inteligentes usa WHERE. Si pides TOP 15 pero solo hay 9 registros, muestra los 9 disponibles."
            },
            {
                question: "¬øEn qu√© orden deben aparecer las cl√°usulas en la sintaxis de SELECT?",
                options: [
                    "El orden puede variar seg√∫n las necesidades",
                    "SELECT ‚Üí FROM ‚Üí WHERE ‚Üí GROUP BY ‚Üí HAVING ‚Üí ORDER BY",
                    "FROM ‚Üí SELECT ‚Üí WHERE ‚Üí ORDER BY ‚Üí GROUP BY ‚Üí HAVING",
                    "WHERE ‚Üí SELECT ‚Üí FROM ‚Üí GROUP BY ‚Üí ORDER BY ‚Üí HAVING"
                ],
                correct: 1,
                explanation: "El orden de las cl√°usulas es obligatorio: SELECT ‚Üí FROM ‚Üí WHERE ‚Üí GROUP BY ‚Üí HAVING ‚Üí ORDER BY. Si no respetas este orden, obtendr√°s errores de sintaxis. ORDER BY siempre debe ser la √∫ltima cl√°usula."
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function initQuiz() {
            displayQuestion();
            updateProgress();
        }

        function displayQuestion() {
            const container = document.getElementById('questionContainer');
            const question = questions[currentQuestionIndex];
            
            container.innerHTML = `
                <div class="question-card active">
                    <div class="question-number">Pregunta ${currentQuestionIndex + 1} de ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options" id="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})" data-index="${index}">
                                <strong>${String.fromCharCode(65 + index)})</strong> ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <h4>üí° Explicaci√≥n:</h4>
                        <p>${question.explanation}</p>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            ‚Üê Anterior
                        </button>
                        <button class="btn btn-primary" onclick="submitAnswer()" id="submitBtn" disabled>
                            Confirmar Respuesta
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                            ${currentQuestionIndex === questions.length - 1 ? 'Ver Resultados' : 'Siguiente ‚Üí'}
                        </button>
                    </div>
                </div>
            `;
            
            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex] !== undefined) {
                selectOption(userAnswers[currentQuestionIndex]);
                submitAnswer();
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[index].classList.add('selected');
            
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            const selectedOption = document.querySelector('.option.selected');
            if (!selectedOption) return;
            
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const question = questions[currentQuestionIndex];
            
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.onclick = null;
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            document.getElementById('explanation').classList.add('show');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                updateProgress();
            } else {
                showFinalScore();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update score
            score = userAnswers.filter((answer, index) => answer === questions[index].correct).length;
            document.getElementById('score').textContent = score;
        }

        function showFinalScore() {
            const finalScore = Math.round((score / questions.length) * 100);
            
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('finalScore').classList.add('show');
            document.getElementById('finalScoreCircle').textContent = finalScore + '%';
            
            let message = '';
            if (finalScore >= 80) {
                message = 'üéâ ¬°Excelente! Dominas los fundamentos del comando SELECT.';
            } else if (finalScore >= 60) {
                message = 'üëç Buen trabajo. Revisa algunos conceptos para mejorar.';
            } else {
                message = 'üìö Necesitas repasar el material sobre comando SELECT.';
            }
            
            document.getElementById('scoreMessage').innerHTML = `
                <p>${message}</p>
                <div class="study-tips">
                    <h4>üìã Puntos clave para dominar:</h4>
                    <ul>
                        <li>Metodolog√≠a de 3 preguntas: ¬øQu√© datos? ¬øD√≥nde est√°n? ¬øQu√© requisitos?</li>
                        <li>Orden de procesamiento: FROM ‚Üí WHERE ‚Üí GROUP BY ‚Üí HAVING ‚Üí SELECT ‚Üí ORDER BY</li>
                        <li>Diferencia entre WHERE (filtra registros) y HAVING (filtra grupos)</li>
                        <li>Funciones de agregaci√≥n: COUNT, SUM, AVG, MAX, MIN</li>
                        <li>Regla de GROUP BY: todas las columnas no agregadas deben estar en GROUP BY</li>
                        <li>ALL vs DISTINCT: todos los registros vs √∫nicos sin duplicados</li>
                        <li>TOP limita registros, no filtra inteligentemente</li>
                        <li>Orden obligatorio de cl√°usulas en la sintaxis SELECT</li>
                    </ul>
                </div>
            `;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('finalScore').classList.remove('show');
            
            initQuiz();
        }

        // Initialize quiz when page loads
        window.onload = initQuiz;
    </script>
</body>
</html>