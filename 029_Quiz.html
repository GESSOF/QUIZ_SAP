<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 029 - JOINs en SAP HANA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .content {
            padding: 40px;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .question-card.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .question-number {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .option.correct {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .explanation {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .final-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            margin-top: 30px;
        }

        .final-score.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .study-tips {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .study-tips h4 {
            color: #e65100;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .study-tips ul {
            margin-left: 20px;
        }

        .study-tips li {
            margin-bottom: 8px;
            color: #bf360c;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                margin: 0;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .question-card {
                padding: 20px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-item {
                padding: 12px 20px;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
            
            .option {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .content {
                padding: 15px;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔗 Quiz 029 | SAP HANA</h1>
            <p>JOINs - Unión de Tablas</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="currentQuestion">1</span>
                    <span>Pregunta</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalQuestions">8</span>
                    <span>Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="score">0</span>
                    <span>Puntaje</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <div id="questionContainer"></div>
            
            <div class="final-score" id="finalScore">
                <div class="score-circle" id="finalScoreCircle">0%</div>
                <h2>¡Quiz Completado!</h2>
                <p id="scoreMessage"></p>
                <button class="btn btn-primary" onclick="restartQuiz()">Reiniciar Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¿Cuál es la principal limitación que superan los JOINs en SQL?",
                options: [
                    "La velocidad de las consultas",
                    "Solo poder consultar información de una tabla a la vez",
                    "La cantidad de registros que se pueden procesar",
                    "El uso de memoria del sistema"
                ],
                correct: 1,
                explanation: "Los JOINs nos permiten superar la limitación fundamental de SQL básico: hasta ahora solo podíamos obtener información de una sola tabla por consulta. Los JOINs combinan datos de múltiples tablas relacionadas en una sola consulta."
            },
            {
                question: "¿Cuáles son los tres tipos principales de relaciones entre tablas?",
                options: [
                    "Pequeña, Mediana y Grande",
                    "Uno a Uno (1:1), Uno a Muchos (1:N) y Muchos a Muchos (N:N)",
                    "Directa, Indirecta y Cruzada",
                    "Simple, Compuesta y Compleja"
                ],
                correct: 1,
                explanation: "Los tres tipos fundamentales de relaciones son: 1:1 (cada registro de A se relaciona con exactamente uno de B), 1:N (cada registro de A puede relacionarse con varios de B), y N:N (registros de ambas tablas pueden relacionarse con múltiples registros de la otra)."
            },
            {
                question: "¿Qué característica define al INNER JOIN?",
                options: [
                    "Incluye todos los registros de ambas tablas",
                    "Solo devuelve registros que tienen coincidencias en ambas tablas",
                    "Devuelve todos los registros de la tabla izquierda",
                    "Es el más lento de todos los JOINs"
                ],
                correct: 1,
                explanation: "INNER JOIN es el más selectivo: solo devuelve registros que tienen coincidencias en ambas tablas. Si un registro de cualquier tabla no tiene correspondencia, queda excluido del resultado. Es como una intersección de conjuntos."
            },
            {
                question: "¿Cuál es la diferencia clave entre LEFT OUTER JOIN y RIGHT OUTER JOIN?",
                options: [
                    "No hay diferencias, son sinónimos",
                    "LEFT preserva todos los registros de la tabla izquierda, RIGHT preserva todos los de la derecha",
                    "LEFT es más rápido que RIGHT",
                    "LEFT solo funciona con números, RIGHT con texto"
                ],
                correct: 1,
                explanation: "LEFT OUTER JOIN devuelve TODOS los registros de la tabla izquierda más las coincidencias de la derecha (con NULL donde no hay coincidencia). RIGHT OUTER JOIN hace lo opuesto: todos los registros de la tabla derecha más las coincidencias de la izquierda."
            },
            {
                question: "¿Cuántos tipos de JOINs diferentes ofrece SAP HANA?",
                options: [
                    "4 tipos (solo los estándar)",
                    "6 tipos",
                    "8 tipos diferentes",
                    "10 tipos"
                ],
                correct: 2,
                explanation: "SAP HANA ofrece 8 tipos de JOINs: los 4 estándar (INNER, LEFT OUTER, RIGHT OUTER, FULL OUTER) más 4 especializados (REFERENTIAL, TEXT, TEMPORAL, SPATIAL). Los especializados son específicos de SAP HANA y casos de uso avanzados."
            },
            {
                question: "¿Qué hace el FULL OUTER JOIN?",
                options: [
                    "Solo muestra coincidencias perfectas",
                    "Devuelve todos los registros de ambas tablas, con NULL donde no hay coincidencias",
                    "Elimina registros duplicados automáticamente",
                    "Ordena los resultados alfabéticamente"
                ],
                correct: 1,
                explanation: "FULL OUTER JOIN combina los efectos del LEFT y RIGHT OUTER JOIN. Devuelve TODOS los registros de ambas tablas, rellenando con NULL donde no hay coincidencias. Es la vista más completa de todos los datos."
            },
            {
                question: "¿Cuál es la característica especial del REFERENTIAL JOIN?",
                options: [
                    "Es más lento pero más seguro",
                    "Funciona solo con tablas numéricas",
                    "Es como INNER JOIN pero optimizado, requiere integridad referencial garantizada",
                    "Solo funciona con dos tablas exactamente"
                ],
                correct: 2,
                explanation: "REFERENTIAL JOIN es como un INNER JOIN superoptimizado. Requiere que tengas integridad referencial garantizada (todos los registros de la tabla izquierda tienen correspondencia en la derecha). Es mucho más rápido pero da resultados erróneos si no se cumple el requisito."
            },
            {
                question: "¿Para qué se usa específicamente el TEXT JOIN en SAP HANA?",
                options: [
                    "Para unir solo campos de texto",
                    "Para sistemas SAP multiidioma, une automáticamente traducciones según el idioma del usuario",
                    "Para buscar texto dentro de los registros",
                    "Para convertir números a texto"
                ],
                correct: 1,
                explanation: "TEXT JOIN es específico para sistemas SAP con múltiples idiomas. Une automáticamente las traducciones según el idioma del usuario conectado. Detecta automáticamente el idioma del login y muestra la traducción correspondiente, o el texto original si no hay traducción disponible."
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function initQuiz() {
            displayQuestion();
            updateProgress();
        }

        function displayQuestion() {
            const container = document.getElementById('questionContainer');
            const question = questions[currentQuestionIndex];
            
            container.innerHTML = `
                <div class="question-card active">
                    <div class="question-number">Pregunta ${currentQuestionIndex + 1} de ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options" id="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})" data-index="${index}">
                                <strong>${String.fromCharCode(65 + index)})</strong> ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <h4>💡 Explicación:</h4>
                        <p>${question.explanation}</p>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            ← Anterior
                        </button>
                        <button class="btn btn-primary" onclick="submitAnswer()" id="submitBtn" disabled>
                            Confirmar Respuesta
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                            ${currentQuestionIndex === questions.length - 1 ? 'Ver Resultados' : 'Siguiente →'}
                        </button>
                    </div>
                </div>
            `;
            
            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex] !== undefined) {
                selectOption(userAnswers[currentQuestionIndex]);
                submitAnswer();
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[index].classList.add('selected');
            
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            const selectedOption = document.querySelector('.option.selected');
            if (!selectedOption) return;
            
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const question = questions[currentQuestionIndex];
            
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.onclick = null;
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            document.getElementById('explanation').classList.add('show');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                updateProgress();
            } else {
                showFinalScore();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update score
            score = userAnswers.filter((answer, index) => answer === questions[index].correct).length;
            document.getElementById('score').textContent = score;
        }

        function showFinalScore() {
            const finalScore = Math.round((score / questions.length) * 100);
            
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('finalScore').classList.add('show');
            document.getElementById('finalScoreCircle').textContent = finalScore + '%';
            
            let message = '';
            if (finalScore >= 80) {
                message = '🎉 ¡Excelente! Dominas perfectamente los JOINs y estás listo para consultas complejas.';
            } else if (finalScore >= 60) {
                message = '👍 Buen trabajo. Repasa los tipos de JOINs y sus casos de uso específicos.';
            } else {
                message = '📚 Necesitas repasar los conceptos fundamentales de JOINs antes de avanzar.';
            }
            
            document.getElementById('scoreMessage').innerHTML = `
                <p>${message}</p>
                <div class="study-tips">
                    <h4>🔗 Puntos clave para dominar los JOINs:</h4>
                    <ul>
                        <li><strong>Limitación superada:</strong> Ahora puedes combinar múltiples tablas</li>
                        <li><strong>INNER JOIN:</strong> Solo coincidencias - el más selectivo</li>
                        <li><strong>LEFT OUTER:</strong> Todos los de la izquierda + coincidencias</li>
                        <li><strong>RIGHT OUTER:</strong> Todos los de la derecha + coincidencias</li>
                        <li><strong>FULL OUTER:</strong> Todos los registros de ambas tablas</li>
                        <li><strong>REFERENTIAL JOIN:</strong> INNER optimizado con integridad garantizada</li>
                        <li><strong>TEXT JOIN:</strong> Para traducciones en sistemas SAP multiidioma</li>
                        <li><strong>Relaciones:</strong> Entender 1:1, 1:N y N:N es fundamental</li>
                        <li><strong>Casos de uso:</strong> Reportes, auditorías, análisis de calidad</li>
                        <li><strong>Sintaxis:</strong> FROM tabla1 JOIN tabla2 ON condición</li>
                    </ul>
                </div>
            `;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('finalScore').classList.remove('show');
            
            initQuiz();
        }

        // Initialize quiz when page loads
        window.onload = initQuiz;
    </script>
</body>
</html>